ackage com.example.rafae.calculator;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity {

    Button btn1;
    Button btn2;
    Button btn3;
    Button btn4;
    Button btn5;
    Button btn6;
    Button btn7;
    Button btn8;
    Button btn9;
    Button btnSuma;
    Button btnResta;
    Button btnMult;
    Button btnDiv;
    Button btnIgual;
    String num1 = "";
    String num2 = "";
    String op;
    Double result;
    TextView textViewResult;
    TextView textViewLog;
    boolean first = true;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        View.OnClickListener numberPressed = new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Button btn = (Button) view;
                if (first) {
                    num1 += btn.getText().toString();
                }
                else num2 += btn.getText().toString();
                textViewLog.setText(textViewLog.getText().toString() + btn.getText().toString());
            }
        };

        View.OnClickListener opPressed = new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                Button btn = (Button) view;
                if (!first) {
                    result = calcula();
                    textViewResult.setText(String.valueOf(result));
                    num1 = String.valueOf(result);
                    num2 = "";

                }
                op = btn.getText().toString();
                first = false;
                textViewLog.setText(textViewLog.getText().toString() + " " + op + " ");
            }
        };

        View.OnClickListener igualPressed = new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                result = calcula();
                textViewResult.setText(String.valueOf(result));
                num1 = String.valueOf(result);
                num2 = "";
                textViewLog.setText("");
            }
        };

        textViewLog = findViewById(R.id.textViewLog);
        btn1 = findViewById(R.id.btn1);
        btn1.setOnClickListener(numberPressed);
        btn2 = findViewById(R.id.btn2);
        btn2.setOnClickListener(numberPressed);
        btn3 = findViewById(R.id.btn3);
        btn3.setOnClickListener(numberPressed);
        btn4 = findViewById(R.id.btn4);
        btn4.setOnClickListener(numberPressed);
        btn5 = findViewById(R.id.btn5);
        btn5.setOnClickListener(numberPressed);
        btn6 = findViewById(R.id.btn6);
        btn6.setOnClickListener(numberPressed);
        btn7 = findViewById(R.id.btn7);
        btn7.setOnClickListener(numberPressed);
        btn8 = findViewById(R.id.btn8);
        btn8.setOnClickListener(numberPressed);
        btn9 = findViewById(R.id.btn9);
        btn9.setOnClickListener(numberPressed);
        btnSuma = findViewById(R.id.btnSuma);
        btnSuma.setOnClickListener(opPressed);
        btnResta = findViewById(R.id.btnResta);
        btnResta.setOnClickListener(opPressed);
        btnMult = findViewById(R.id.btnMult);
        btnMult.setOnClickListener(opPressed);
        btnDiv = findViewById(R.id.btnDiv);
        btnDiv.setOnClickListener(opPressed);
        btnIgual = findViewById(R.id.btnIgual);
        btnIgual.setOnClickListener(igualPressed);
        textViewResult = findViewById(R.id.textViewResult);

    }

    private Double calcula() {
        double result = 0;
        if (op.equals("+")) result = Double.parseDouble(num1) + Double.parseDouble(num2);
        else if (op.equals("-")) result = Double.parseDouble(num1) - Double.parseDouble(num2);
        else if (op.equals("*")) result = Double.parseDouble(num1) * Double.parseDouble(num2);
        else if (op.equals("/")) result = Double.parseDouble(num1) / Double.parseDouble(num2);
        return result;
    }
}
